def longest_subarray_positive(arr, K):
    max_length = 0
    curr_sum = 0
    left = 0

    for right in range(len(arr)):
        curr_sum += arr[right]

        while curr_sum > K and left <= right:
            curr_sum -= arr[left]
            left += 1

        if curr_sum == K:
            max_length = max(max_length, right - left + 1)
    return max_length

# Example usage:
arr = [10, 5, 2, 7, 1]
K = 15
print(longest_subarray_positive(arr, K))  # Output: 4
